# 第1章 软件体系结构概论

## 1.1 从软件危机谈起

### 软件危机的表现
- **软件成本日益增长**：自20世纪50年代以来，软件成本占整个计算机系统成本的比例从10%-20%上升到1985年的约85%。这表明软件成本的增长速度远超硬件。
- **开发进度难以控制**：软件开发是一个复杂的逻辑和创意过程，因此容易受到需求变化、技术难题等因素的影响，导致进度不可预测。
- **软件质量差**：许多软件项目即使完成也常常无法达到预期质量，例如多次的火箭发射失败就是由于软件缺陷。
- **软件维护困难**：由于缺乏有效的开发标准和文档记录，软件一旦交付使用后，维护变得异常困难，尤其是原开发团队不再参与时。

### 软件危机的原因
- **用户需求不明确**：软件开发前用户往往无法提供清晰具体的需求，需求文档可能模糊不清，容易造成开发方向错误。
- **缺乏正确的理论指导**：软件开发过分依赖个人技术和创造力，缺乏工程化、标准化的方法，使得项目易受个人能力限制。
- **软件规模与复杂度不断增加**：随着应用领域的扩大，软件系统变得日益庞大和复杂，增加了管理和技术的难度。

## 1.2 构件与软件重用

### 构件的定义
- **构件**：构件是指语义完整、语法正确且有可重用价值的单位软件；结构上，它是语义描述、通讯接口和实现代码的复合体。

### 构件模型及其实现
- **构件模型**：构件模型是基于构件的软件开发(CBSD)技术中的一个重要概念，构件模型通过描述构件的接口和实现以及构件之间的关联来描述软件体系结构。

  ![image-20240630200712041](http://scutgbt.eu.org:40027/i/2024/06/30/66814a7045d88.png)

- **OMG的CORBA**（Common Object Request Broker Architecture，通用对象请求代理架构）：一个由对象管理组织提出的标准，旨在使不同系统上的程序组件能够彼此通信。

- **Sun的EJB**（Enterprise JavaBeans）：一种在Java平台上用于构件企业级应用的服务器端软件组件架构，简化了企业应用的开发。

- **Microsoft的DCOM**（Distributed Component Object Model，分布式组件对象模型）：允许软件组件通过网络进行通信的技术，是COM的扩展，支持网络上的对象交互。

### 构件获取与管理
- **获取方式**：包括从现有项目中提取、购买商业构件或自行开发。
- **构件管理**：涉及到构件的整理、分类及权限控制，确保构件库的有序和安全。

### 构件分类与组织

- **关键字分类法**：是一种最简单的构件库组织方法,根据领域分析的结果将应用领域的概念按照从抽象到具体的顺序逐次分解为树形或有向无回路图结构
  - **如何检索**:系统在图形用户界面上将构件库的关键字树形结构直观的展示给用户,用户通过对树形结构的逐级浏览寻找需要的关键字并提取相应的构件
  - **优点**：简单、易于实现
  - **缺点**：在某些场合没有应用价值,因为用户往往无法用构建库中已有的关键字描述期望的构件功能或行为,对库的浏览也容易使用户迷失方向

![image-20240702154545310](http://scutgbt.eu.org:40027/i/2024/07/02/6683b0331815a.png)

- **刻面分类法**：主要思想来源于图书馆学,在刻面分类机制中,定义若干用于刻画构件特征的“面”,每个面包含若干概念,这些概念表述构件在面上的特征。
  - **如何检索**:构造查询、检索构件、对构件进行排序
  - **优点**：易于实现相似构建的查找
  - **缺点**：查询过程较为麻烦

- **超文本组织法**：所有构件必须辅以详尽的功能或行为说明文档;说明中出现的重要概念或构件以网状链接方式相互连接
  - **如何检索**：用户首先给出一个或数个关键字,系统在构件的说明文档中进行精确或模糊的语法匹配,匹配成功后,向用户列出相应的构建说明
  - **优点**：超文本组织方法为构造构件和重用构件提供了友好,直接的多媒体方式
  - **缺点**：某些情况下用户难以在超文本浏览过程中正确选取构件 

![image-20240702154711826](http://scutgbt.eu.org:40027/i/2024/07/02/6683b08212150.png)

### 构件重用
- **构件检索与提取**：通过多种检索方法，如关键字搜索或结构化查询，来查找适合的构件。
- **构件理解与评价**：分析构件的功能和行为，确保其满足新项目的需求。
- **构件修改与组装**：根据项目需求对构件进行必要的修改，并采用不同技术将多个构件组装成一个完整的系统。

## 1.3 体系结构的兴起和发展

### 背景与定义
- **软件体系结构的重要性**：随着软件系统的规模和复杂度的增加，体系结构提供了一种高效的方法来组织和描述大型系统。

### 软件体系结构的意义与发展史
- **风险管理和设计决策**：体系结构帮助项目团队在早期阶段做出关键决策，减少未来的风险和成本。
- **发展史**：从最初的无结构设计到采用现代UML等工具的体系结构阶段。

## 1.4 体系结构的应用现状

### 当前研究和实践
- **体系结构工具和方法**：如ADL（体系结构描述语言）和ATAM（体系结构权衡分析方法），为设计和评估软件体系结构提供了标准化工具。



# 第2章 软件体系结构件模

## 2.1 软件体系结构件模概述

### 结构模型
- **定义**: 结构模型是最直观、最普遍的建模方法，通过体系结构的构件、连接件来刻画结构，反映系统的重要语义内容，包括系统的配置、约束、隐含的假设条件等。
- **重点**: 研究结构模型的核心是体系结构描述语言的应用。

### 框架模型
- **概述**: 框架模型与结构模型类似，但更侧重于整体结构而非细节，针对特定问题建立适应的结构。

### 动态模型
- **特点**: 动态模型补充结构或框架模型，关注系统的大颗粒行为性质，如系统配置、通信通道建立或拆除等动态行为。

### 过程模型
- **研究内容**: 过程模型关注构造系统的步骤和过程，如遵循某些过程脚本的结构结果。

### 功能模型
- **定义**: 功能模型视体系结构为一组按层次组成的功能构件，每层向上提供服务，是特殊的框架模型。

## 2.2 “4+1”视图模型

- **发起者**: Philippe Kruchten于1995年提出“4+1”模型，目的是从不同视角全面描述软件体系结构。

- **组成**:
  - **逻辑视图**: 支持功能需求，系统分解为功能抽象，用类图描述。
  
    ![image-20240630202133629](http://scutgbt.eu.org:40027/i/2024/06/30/66814dcdd80bf.png)
  
  - **进程视图**: 描述系统的运行管理，如任务的组织和通信。
  
  ![image-20240630202220748](http://scutgbt.eu.org:40027/i/2024/06/30/66814dfd013b3.png)
  
  - **开发视图**: 侧重软件模块的组织，关注模块的管理和包装。
  
  ![image-20240630202250367](http://scutgbt.eu.org:40027/i/2024/06/30/66814e1a95c38.png)
  
  - **物理视图**: 映射软件到硬件，关注性能、规模、可靠性。
  
  ![image-20240630202236895](http://scutgbt.eu.org:40027/i/2024/06/30/66814e0d1fd9b.png)
  
  - **场景**: 绑定四视图，描述使用情景，提供需求抽象。
  
  ![image-20240630201953599](http://scutgbt.eu.org:40027/i/2024/06/30/66814d6c911e7.png)

## 2.3 体系结构的核心模型

- **概念**: 描述体系结构基本元素，如构件、连接件及其关系。
- **应用**: 体系结构模型用于详细表达和理解系统组成和交互。

![image-20240630202730150](http://scutgbt.eu.org:40027/i/2024/06/30/66814f325b940.png)

## 2.4体系结构的生命周期模型

- 软件构成：需求分析→建立体系结构→设计→实现→测试

![image-20240630202919039](http://scutgbt.eu.org:40027/i/2024/06/30/66814f9f44554.png)

## 2.5软件体系结构抽象模型

- ### **定义**

  - 定义1：构件C由对象集合O、属性集合A、动作集合X、端口集合P组成。C=(O,A,X,P)

  - 定义2：C1和C2是顺序关系，写作C1|→C2，同时(C1|→C2)的OAX = C1的OAX∪C2的OAX

  - 定义3：(C1|→C2)P = (C1P-C1P↓used)∪(C2P-C2P↑used)

  - 定义4：如果C1的OAXP = C2的OAXP，则C1 = C2

  - 定义5：根据条件选择C1和C2，写作C1◁C2。同时(C1◁C2)OAXP = C1OAXP 或 C2OAXP

  - 定义6：C1和C2是循环结构或循环运算，记作C1↔C2，同时拥有定义2的功能

  - 定义7：连接件是构件运算的实现由六元组组成<ID,Role,Beha,Msgs,Cons,Non-Func>

    - ID：标识

    - Role：连接件和构件的交互点的集合

      ​		   Role=<ID(标识),Action(活动集合),Event(事件集合),LConstrains(约束集合)>

    - Beha：行为集合

    - Msgs：Role各事件产生的消息

    - Cons：约束的集合Cons(init初始条件，pre-cond前置条件，post-cond后置条件)

    - Non-Func：非功能说明，包含连接件的可靠性、安全性说明

  - 定义8：**构件**和**连接件**以及**构件经有限次连接(运算)**是软件体系结构，则软件体系结构A=<C,O>,C为构件集合，O为构件运算集合。

## 思考题和作业

1. 描述“4+1”模型中每个视图的主要关注点。
2. 讨论软件体系结构件模在软件工程中的作用及其重要性。
3. 比较结构模型和框架模型的应用场景和优势。



# 第3章 软件体系结构风格

## 3.1 软件体系结构风格概述
- **定义**: 软件体系结构风格定义了构件（Components）和连接件（Connectors）的类型及其组织方式，反映了特定应用领域中系统的共性和变化的约束。

## 3.2 经典的体系结构风格

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66824f417584f.png" alt="image-20240701143953360" style="zoom:50%;" />

### 管道和过滤器
- **定义**: 一种数据流处理的架构风格，由一系列的处理单元（过滤器）组成，每个单元对通过的数据执行某种形式的转换，通过管道（连接件）传递数据。
- **构成**: 过滤器处理输入数据并产生输出，管道负责传输数据。
- **优点**: 易于并行处理，可增强模块化和重用。高隐蔽性、高内聚、低耦合
- **缺点**: 难以适用于交互密集的应用，可能引入延迟。
- <img src="http://scutgbt.eu.org:40027/i/2024/07/01/66824f5d0b9da.png" alt="image-20240701144027921" style="zoom:67%;" />
- <img src="http://scutgbt.eu.org:40027/i/2024/07/01/66824f6387b02.png" alt="image-20240701144034514" style="zoom:50%;" />
- <img src="http://scutgbt.eu.org:40027/i/2024/07/01/66824f6d9a16b.png" alt="image-20240701144044384" style="zoom:67%;" />

### 数据抽象和面向对象组织
- **定义**: 将系统功能封装在互相交互的对象集合中，每个对象管理其状态并通过公开的方法与其他对象交互。
- **构成**: 对象封装数据和操作这些数据的方法，类定义如何创建对象。主要特点为：封装、继承、多态
- **优点**: 改进系统模块化，简化了接口，易于维护和扩展。
- **缺点**: 高度依赖对象接口，可能增加设计复杂性。

### 事件驱动架构
- **定义**: 组件通过事件而非直接调用来进行交互，依赖于事件的触发和处理。
- **构成**: 构件作为事件的发布者或订阅者，通过事件总线连接，响应和触发事件。
- **优点**: 提升系统的响应性和可扩展性，减少了组件间的直接依赖。
- **缺点**: 事件管理可能增加系统复杂性，难以追踪和调试。

### 分层架构
- **定义**: 系统被组织为层次结构，每层仅依赖于其下层提供的服务。
- **构成**: 每层实现一组相关的功能，服务下层，并使用上层的功能。
- **优点**: 易于替换和升级层，清晰的功能分离促进了维护。
- **缺点**: 层与层之间的调用可能影响性能，过度的层次可能导致效率低下。
- <img src="http://scutgbt.eu.org:40027/i/2024/07/01/668250a65b2f3.png" alt="image-20240701144557123" style="zoom:50%;" />

### 仓库风格
- **定义**: 系统通过共享的中央数据结构（仓库）协调独立的构件。
- **构成**: 中央仓库连接多个构件，构件在仓库上执行读/写操作。
- **优点**: 便于数据共享和同步，集中管理数据。
- **缺点**: 中央数据仓库可能成为性能瓶颈，影响系统的扩展性。
- <img src="http://scutgbt.eu.org:40027/i/2024/07/01/668250b1740e7.png" alt="image-20240701144608415" style="zoom: 67%;" />

## 3.3 客户/服务器风格
- **定义**: 明确划分为服务请求者（客户端）和服务提供者（服务器）的架构风格。

- **服务器调度**：两种调度方式：有等待队列、无等待队列。调度方式包括：进程调度、线程调度、线程池调度

- **体系结构**:
  - **二层结构**: 客户端直接与服务器交互。
  
    <img src="http://scutgbt.eu.org:40027/i/2024/07/01/668255ad48759.png" style="zoom:67%;" />
  
  - **三层结构**: 加入业务逻辑层，分离客户端和数据管理，提高可维护性。
  
    <img src="http://scutgbt.eu.org:40027/i/2024/07/01/668255c7a7d2d.png" alt="image-20240701150750600" style="zoom:67%;" />
  
  - **多层结构**: 进一步细分服务层，适合复杂的企业应用。
  
- **优点**: 支持分布式处理，可减轻服务器负担。模型简单，易于理解。高适应性和高灵活性，易于扩充或缩小

- **缺点**: 依赖网络性能，设计和维护更为复杂。

## 3.4 浏览器/服务器风格
- **定义**: 应用逻辑分为运行在浏览器的客户端和提供服务的服务器。
- **优点**: 简化客户端，减少维护成本。
- **缺点**: 对网络性能高依赖，可能存在安全风险。响应速度远不如C/S结构

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/668256f21d373.png" alt="image-20240701151249042" style="zoom:67%;" />

## 3.5 C2风格
- **定义**: 基于构件和消息的松散耦合架构风格，通过消息总线协调构件交互。
- 系统的构建和连接件都有顶部和底部，底部向下获取信息和传递信息，顶部向上接受信息和传递信息
- 构建必须依靠连接件来连接其他构件，而连接件可以任意连接其余连接件或构件
- **优点**: 促进大粒度的复用和动态的系统重组。
- **缺点**: 通信开销可能较大，管理复杂性增加。
- <img src="http://scutgbt.eu.org:40027/i/2024/07/01/6682518287313.png" alt="image-20240701144937415" style="zoom:67%;" />

## 思考题
- 分析并比较各种软件体系结构风格的优缺点及适用场景。
- 探讨在项目中如何选择合适的体系结构风格以优化系统设计。



# 第4章 软件体系结构描述

## 4.1 软件体系结构描述方法

![image-20240701151611890](http://scutgbt.eu.org:40027/i/2024/07/01/668257bd04222.png)

### 图形表达工具
- **概述**: 使用图形化的方式来描述软件体系结构，提高可视化和易理解性。
- **应用**: 例如UML（统一建模语言），广泛用于表示软件体系结构的各个方面，包括用例图、类图、序列图等。

![image-20240701151630188](http://scutgbt.eu.org:40027/i/2024/07/01/668257cf32b73.png)

### 模块内连接语言
- **定义**: 早期的一种尝试，通过定义模块之间的连接来描述软件体系结构。
- **特点**: 需要模块在同一语言编写，并且在系统构件时可用。
- **进展**: 新的发展允许模块动态实例化和运行时绑定，支持多种编程语言的模块实现。

### 基于软件构件的系统描述语言
- **定义**: 描述软件系统为由多个相互作用的软件实体组成的系统。
- **适用性**: 虽然这是一种良好的以构件为单位的描述方法，但主要适用于特定应用的特殊系统。

### 软件体系结构描述语言 (ADLs)
- **定义**: 提供具体语法和概念框架来建模软件系统的概念体系结构。
- **功能**: 支持体系结构的表示、分析、演化和设计过程。
- **示例**: Aesop、MetaH、C2、Rapide、SADL、Unicon和Wright等，每种语言针对体系结构的不同方面有不同的侧重点。

![image-20240701151815642](http://scutgbt.eu.org:40027/i/2024/07/01/66825838bf3f7.png)

## 4.2 软件体系结构描述语言的功能与影响
- **功能**: 这些ADLs支持从构件、连接件到体系结构配置的模型创建。
- **挑战**: 虽然各ADLs都描述软件体系结构，它们的语法不同且互不兼容，这对设计人员选择合适的ADL构成挑战。

## 4.3 动态软件体系结构
- **特点**: 支持运行时体系结构的动态修改，提高了软件的适应性和灵活性。
- **技术**: 如动态链接和远程服务调用等。

## 4.4 C2体系结构描述语言
- **特点**: C2是一种组件和消息驱动的体系结构风格，支持动态的体系结构修改和多样化的用户交互。
- **构成**: 定义组件和连接器，通过消息交换进行通信，组件和连接器通过明确定义的协议相互作用。

## 4.5 软件体系结构与UML
- **UML**: 作为通用的建模语言，UML提供了一系列图表来描述软件体系结构的不同方面。
- **用例**: 使用UML来建模系统结构，包括行为、交互和物理部署。

![image-20240701151908379](http://scutgbt.eu.org:40027/i/2024/07/01/6682586d770bb.png)

- **用例图**

  ![image-20240701151926376](http://scutgbt.eu.org:40027/i/2024/07/01/6682587f6cb39.png)

- **类图**（逻辑视图）

![image-20240701152021586](http://scutgbt.eu.org:40027/i/2024/07/01/668258b6a33ab.png)

- **序列图**

![image-20240701152040594](http://scutgbt.eu.org:40027/i/2024/07/01/668258c9a20e1.png)

- **协作图**

![image-20240701152053189](http://scutgbt.eu.org:40027/i/2024/07/01/668258d65fdf2.png)

- **状态图**

![image-20240701152107031](http://scutgbt.eu.org:40027/i/2024/07/01/668258e428390.png)

- **活动图**

![image-20240701152118378](http://scutgbt.eu.org:40027/i/2024/07/01/668258ef70a1d.png)

- **构件图**（进程视图、开发视图）

![image-20240701152129406](http://scutgbt.eu.org:40027/i/2024/07/01/668258fa751f9.png)

- **部署图**

![image-20240701152143127](http://scutgbt.eu.org:40027/i/2024/07/01/66825908447f2.png)

## 思考题和作业
1. 体系结构描述有哪些方法？有哪些标准和规范？
2. 体系结构描述语言与程序设计语言有什么区别？
3. 选择一个规模适中的系统，使用UML为其建模。



# 第5章 动态软件体系结构

## 5.1 动态软件体系结构概述
- **定义**: 动态软件体系结构允许在运行时修改其结构和行为，适应环境变化和系统需求的变动。
- **特点**:
  - **交互式动态性**: 系统能够在用户交互过程中动态地改变其行为。
  - **结构化动态性**: 系统结构可以在运行时进行调整，如添加、删除或替换组件。
  - **体系结构动态性**: 支持对整个体系结构进行动态修改，包括组件配置和连接方式的改变。

## 5.2 软件体系结构动态模型
### 基于构件的动态系统结构模型
- **模型简介**: 描述如何在运行时通过构件来更新和维护系统结构，确保系统的灵活性和可扩展性。

![image-20240701152332724](http://scutgbt.eu.org:40027/i/2024/07/01/66825975c4880.png)

- **更新请求描述**:
  - **更新类型**: 定义需要进行的更新操作类型，如增加、删除、修改等。
  - **更新对象列表**: 列出所有需要更新的构件及其属性。
  - **对象的新版本说明**: 详细描述每个构件更新后的新特性和行为。
  - **对象更新方法**: 指定实现更新的技术和步骤。
  - **更新函数**: 具体的函数或方法，用于实施更新。
  - **更新限制**: 更新过程中需要遵守的规则和约束。

### 更新执行步骤
- **检测更新的范围**: 确定哪些部分的体系结构需要更新。
- **更新准备工作**: 准备必要的资源和配置，以便更新。
- **执行更新**: 实际应用更新到系统中。
- **存储更新**: 确保所有的更新都被正确地记录和保存。

### 实例分析
- **局部更新**: 分析只涉及系统一部分的更新实例。

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/668259b856de8.png" alt="image-20240701152439326" style="zoom:67%;" />

- **全局更新**: 探讨系统范围内的广泛更新实例。

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/668259c71e898.png" alt="image-20240701152453984" style="zoom:67%;" />

### πADL动态体系结构

![image-20240701152615300](http://scutgbt.eu.org:40027/i/2024/07/01/66825a186236b.png)

- **基本概念**: 使用π演算来描述和实现软件体系结构的动态性。
- **体系结构描述框架**: 定义如何使用πADL进行体系结构的建模和规约。
- **体系结构行为规约**: 描述体系结构组件之间的交互和通信。
- **体系结构规约实例**: 提供实际的例子说明如何使用πADL描述动态软件体系结构。

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66825cf005c66.png" alt="image-20240701153822903" style="zoom:67%;" />

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66825d0511619.png" alt="image-20240701153843962" style="zoom:67%;" />

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66825d0fd94af.png" alt="image-20240701153854861" style="zoom:80%;" />

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66825d18e1666.png" alt="image-20240701153903892" style="zoom:80%;" />

## 本章作业与思考题
1. 什么是动态软件体系结构？动态软件体系结构与静态软件体系结构有什么区别？
2. 基于构件的动态软件体系结构模型的层次结构是什么？
3. 如何使用πADL进行动态体系结构件模？
4. 试比较Dynamic Wright和Darwin的特点。
5. 试用Dynamic Wright描述B/S结构。



# 第6章 Web服务体系结构

## 6.1 Web服务概述
- **定义**: Web服务是一种服务，基于Web的开放标准（如HTTP、XML和SOAP）来支持应用程序间的交互。
- **目的**: 在异构平台之上构件一个通用的、平台无关和语言无关的技术层，实现不同平台上的应用之间的连接和集成。

## 6.2 Web服务的核心技术
### XML (Extensible Markup Language)
- **定义**: 一种可扩展标记语言，用于标记数据和定义数据格式，是Web服务数据交换的基础。
- **重要性**: 提供了一个与平台和编程语言无关的方式来描述和交换数据。

### SOAP (Simple Object Access Protocol)
- **定义**: 一种轻量的协议，用于交换结构化信息，在Web服务中用于消息传递。
- **细节**: 可以通过HTTP、SMTP等网络协议传输，支持请求/响应模式。

![image-20240701155637781](http://scutgbt.eu.org:40027/i/2024/07/01/66826136d3b4a.png)

### WSDL (Web Services Description Language)
- **定义**: 用于描述Web服务和其操作的XML格式的语言，定义了服务提供的操作及消息格式。
- **用途**: 允许服务消费者理解如何与Web服务交互。

### UDDI (Universal Description, Discovery, and Integration)
- **定义**: 一个标准的服务发现协议，Web服务通过UDDI进行注册和发现。
- **功能**: 提供了一个机制来发布和查找Web服务，支持动态集成。

## 6.3 Web服务架构
- **层次结构**: 描述了Web服务组件如何相互作用，包括服务请求者、服务提供者和服务注册中心。
- **松耦合**: Web服务允许客户端和服务之间保持松散连接，即使服务的实现发生变化，也不会影响到客户端。

## 6.4 动态集成
- **挑战**: 数据格式标准化、通信协议的一致性和服务的动态发现与集成。
- **解决方案**: 通过实现Web服务标准，如SOAP和WSDL，以及利用UDDI来动态发现服务。

## 6.5 实际应用
- **实例**: 展示如何使用Web服务技术来实现企业间的动态集成，包括服务注册、发现和调用流程。
- **案例分析**: 探讨使用Web服务解决特定行业问题的具体案例，如电子商务平台的集成。

## 本章作业与思考题
1. 什么是Web服务体系结构？与传统的体系结构相比，使用Web服务有哪些好处？
2. 在Web服务中，如何实现其松散耦合的特点？
3. 分析服务提供者、服务请求者和服务代理三者的作用及其间的工作流程。
4. 解释Web服务栈的层次结构。
5. Web服务有哪些核心技术，这些技术是如何在Web服务中发挥作用的？
6. 从管理的角度看，SOA（服务导向架构）有什么优点？
7. 在实际开发中，如何实现Web服务和SOA结构？



# 第7章 基于体系结构的软件开发

## 7.1 设计模式概述
- **定义**: 设计模式是用来解决常见软件设计问题的经过验证的解决方案。它们是在某些特定环境下，用来解决特定问题的程序设计指导方针。
- **目的**: 设计模式的使用可以提高代码的可重用性、可读性和可维护性。
- **基本要素**：模式名称、问题、解决方案、效果

## 7.2 设计模式的分类
- **创建型模式**: 如单例模式、工厂方法模式，主要用于描述如何创建对象。
- **结构型模式**: 如桥接模式、装饰模式，主要用于设计对象和类的组织结构。
- **行为型模式**: 如命令模式，主要用于描述对象之间的通信。

## 7.3 设计模式原则
- **开闭原则**: 软件实体应对扩展开放，对修改关闭。
- **里氏替换原则**: 子类型必须能够替换掉它们的父类型。
- **依赖倒置原则**: 高层模块不应依赖于低层模块，两者应依赖于抽象。
- **接口隔离原则**: 不应该强迫客户依赖于它们不用的接口。
- **合成复用原则**: 尽量使用对象组合，而不是继承来达到复用的目的。

## 7.4 常见设计模式详解
### 单例模式
- **目的**: 保证一个类仅有一个实例，并提供一个访问它的全局访问点。
- **应用**: 用于控制配置信息的全局访问。

### 工厂方法模式
- **目的**: 定义一个创建对象的接口，让子类决定实例化哪一个类。
- **应用**: 用于创建一组相关或依赖对象。
- 简单工厂扩展的时候需要添加if-else。工厂方法模式（抽象工厂）先使用抽象工厂生成工厂后再进行工厂模式→不需要if-else。

### 桥接模式
- **目的**: 将抽象部分与实现部分分离，使它们可以独立变化。
- **应用**: 用于不同的用户界面和业务逻辑的组合。

### 装饰模式
- **目的**: 动态地给一个对象添加一些额外的职责。
- **应用**: 用于扩展功能，而不是静态地通过继承增加子类。

## 7.5 设计模式的应用
- **框架与设计模式**: 讨论如EJB框架中使用的设计模式。
- **设计模式与软件工程**: 探讨如何通过设计模式来提升软件的架构质量和可维护性。

## 本章作业与思考题
1. 比较基于体系结构的软件开发模型与其他软件开发模型。
2. 探讨基于体系结构的软件设计方法与其他软件设计方法。
3. 讨论如何通过设计模式提高软件系统的可演化性。



# 第8章 软件体系结构的分析与测试

## 8.1 可靠性建模
- **概述**: 可靠性建模是评估软件系统预期可靠性的技术。它使用不同的模型来预测软件在特定条件下的表现。
- **主要模型**:
  - **基于操作剖面的模型**: 利用用户操作的频率和模式来预测软件的可靠性。
  - **基于状态的模型**: 假设软件控制转移具有马尔可夫性质，适用于有清晰状态转移的系统。
  - **基于路径的模型**: 在软件实现后评估，通过分析执行路径来预测问题发生的可能性。

### 可靠性通用模型
- **定义**: 描述基于构件的软件系统中构件概率迁移和交互的模型。
- **应用**: 使用构件概率迁移图来具体化模型，通过模拟来评估系统整体的可靠性。

## 8.2 可靠性风险分析
- **目的**: 通过识别、评估和优先级排序潜在的风险来预防可能的失败。
- **方法**:
  - **Component Dependency Graphs**: 显示组件之间的依赖关系，用于识别高风险组件。
  - **Failure Mode and Effect Analysis (FMEA)**: 系统化的方法，用来确定单个架构元素的失败模式及其对系统的影响。
  - **Severity Analysis**: 评估每种失败模式的严重性，确定其对系统功能的影响。

### 动态指标和复杂性分析
- **Dynamic Metrics**: 衡量软件在运行时表现的指标，如响应时间和资源消耗。
- **Complexity Analysis**: 评估软件架构的复杂性，包括组件复杂性和连接器复杂性。

## 8.3 基于体系结构的软件测试
- **测试策略**: 与传统的程序测试不同，体系结构测试关注于设计的适用性而非实现代码。
- **测试准则**: 测试应覆盖所有的组件及各个组件的接口、各个连接器的接口、组件之间的直接和间接连接
- **测试级别**:
  - **1级测试**: 组件内部
  - **2级测试**: 连接器内部
  - **3级测试**: 连接器与组件
  - **4级测试**: 组件与连接器及组件之间

### 测试准则和方法
- **测试需求**: 涵盖所有组件及其接口，所有连接器的接口，以及组件之间的直接和间接连接。
- **测试用例生成**: 基于体系结构描述，生成针对不同测试级别的测试用例。
- **测试充分性**: 确保测试覆盖了所有的体系结构元素和它们的交互。

## 本章作业与思考题
1. 描述软件体系结构的可靠性的重要性及其评估方法。
2. 讨论软件体系结构风险分析的步骤和方法。
3. 解释体系结构测试与传统软件测试的区别及其重要性。



# 第9章 软件体系结构评估

## 9.1 体系结构评估概述
### 性能
- **定义**: 系统响应能力的度量，如响应时间和处理能力。
- **度量**: 常用度量包括单位时间内处理的事务数量和完成特定任务所需的时间。

### 可靠性
- **定义**: 系统在面对故障时维持功能的能力。包含：容错、健壮性
- **度量**: 使用MTTF（平均故障前时间）和MTBF（平均故障间隔时间）进行评估。

### 可用性
- **定义**: 系统正常运行的时间比例。
- **度量**: 通常用两次故障之间的时间和系统恢复正常的速度来衡量。

### 安全性
- **定义**: 系统阻止未授权访问并保证数据机密性、完整性、不可否认性和可控性的能力。
- **子分类**: 包括机密性、完整性和可控性。

### 可修改性
- **包括**: 可维护性、可扩展性、结构重组和可移植性。
- **定义**: 体系结构容易进行修改和扩展的能力。

### 功能性
- **定义**: 系统完成预期工作的能力，涉及多个或所有组件的协作。

### 可变性
- **定义**: 体系结构适应新需求、改变并转化为新体系结构的能力。

### 集成性和互操作性
- **定义**: 系统与其他系统协作的能力，包括接口设计和外部通信。

### 基本概念

- **敏感点和权衡点**：敏感点可以让设计人员明确实现质量目标需要注意什么，权衡点是多个质量属性的敏感点
- **风险承担者**：系统的体系结构设计多人利益，会对体系结构产生影响

## 9.2 软件体系结构评估的主要方式
### 基于调查问卷或检查表
- **特点**: 利用问卷和检查表收集关于体系结构的信息，评估多种质量属性。
- **优缺点**: 灵活且依赖于评估者的经验和知识，但可能较主观。

### 基于场景的评估
- **方法**: 分析体系结构对特定使用或修改场景的支持程度。
- **应用**: 如ATAM(体系结构权衡分析方法)和SAAM(软件体系结构分析方法)方法，评估体系结构是否满足特定质量需求。

### 基于度量的评估
- **定义**: 使用体系结构相关的度量来评估质量属性。
- **技术**: 包括代码行数、构件个数等，与体系结构的质量属性建立映射关系。

![image-20240701173233947](http://scutgbt.eu.org:40027/i/2024/07/01/668277e9080e1.png)

## 9.3 ATAM评估方法
- **过程**: 包括九个步骤，从描述ATAM方法到描述评估结果。
  - **介绍ATAM方法**：要求评估小组负责人向参加会议的风险承担者介绍ATAM评估方法。
  
  - **描述商业动机**：参加评估的所有人员必须理解待评估的系统
  
  - **描述体系结构**：首席设计师或设计小组要对体系结构进行详略适当的介绍，并形成文档，包含可用时间、系统风险等。
  
  - **确定体系结构方法**：由设计师确定体系结构方法，由分析小组捕获，但不进行分析。
  
  - **生成质量属性效用树**： 评估小组、设计小组、管理人员和客户代表一起确定系统最重要的质量属性目标，并对这些质量目标设置优先级和细化。

    <img src="http://scutgbt.eu.org:40027/i/2024/07/01/668299387c7ac.png" alt="image-20240701195528496" style="zoom: 67%;" />
  
  - **分析体系结构方法**：评估小组要对每一种体系结构方法都考察足够的信息，完成与该方法有关的质量属性的初步分析。
  
  <img src="http://scutgbt.eu.org:40027/i/2024/07/01/6682996ade68f.png" alt="image-20240701195625767" style="zoom:67%;" />
  
  - **讨论和分级场景**：风险承担者需进行两项相关的活动：集体讨论用例场景（描述风险承担者期望使用系统的方式）和改变场景（描述风险承担者所期望的系统在将来变更的方式）。收集场景→决定场景优先级
  - **分析体系结构方法**（重复第六步）：评估小组要重复第6步中的工作，把新得到的最高优先级场景与尚未得到的体系结构工作产品对应起来。
  - **描述评估结果**：最后，要把ATAM分析中所得到的各种信息进行归纳，并反馈给风险承担者。
  
  <img src="http://scutgbt.eu.org:40027/i/2024/07/01/668299f7ae3d3.png" alt="image-20240701195846537" style="zoom:80%;" />
  
- **关键活动**: 包括生成质量属性效用树、分析体系结构方法和讨论场景。

- **结果**: 提供关于体系结构的敏感点、权衡点和潜在风险的洞察。

## 本章作业与思考题
1. 为什么要评估软件体系结构？
2. 软件体系结构评估包括哪些方面？
3. 描述ATAM评估方法的基本步骤。



# 第10章 软件产品线体系结构

## 10.1 软件产品线的出现和发展
- **历史背景**: 软件产品线概念最早由Parnas在1976年提出，目的是通过软件重用来提高生产效率和质量。
- **实践发展**: 从1980年代中期开始，大公司如HP、IBM等通过采用软件产品线方法显著提升了开发效率和软件质量。

## 10.2 软件产品线概念
- **定义**: 软件产品线是基于共享的核心资源和架构，为特定市场或任务领域开发的一系列相关软件产品的集合。
- **核心组成**:
  - **产品线体系结构**: 包括共享的架构和构件，为所有产品提供基础。
  - **核心资源**: 包括架构、共享组件、设计文档和领域模型等。
  - **产品集合**: 利用核心资源开发的各具特色的产品。

## 10.3 软件产品线的过程模型
- **双生命周期模型**: 强调核心资源开发和产品开发的并行进行。

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66829a6a30424.png" alt="image-20240701200041220" style="zoom: 67%;" />

- **SEI模型**: 描述产品线开发的循环重复特性，强调核心资源和产品开发的互动。

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66829a81ba242.png" alt="image-20240701200058898" style="zoom: 67%;" />

- **三生命周期模型**: 进一步细分过程，明确区分领域工程、应用工程和管理活动。

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66829a9562ea4.png" alt="image-20240701200124360" style="zoom:67%;" />

## 10.4 软件产品线的组织结构

<img src="http://scutgbt.eu.org:40027/i/2024/07/01/66829aa1b190f.png" alt="image-20240701200136777" style="zoom:67%;" />

- **SEI产品线组织结构**:
  - **市场小组**: 负责沟通客户需求和产品能力。
  - **核心资源组**: 开发和维护共享的体系结构和组件。
  - **应用组**: 负责开发最终用户产品。
  - **管理层**: 协调开发过程和商务计划。
- **Jan Bosch模型**:
  - **开发部门**: 集中所有软件开发，适用于小型组织。
  - **业务部门**: 每个部门负责一类产品，共性资源由多部门协作开发。
  - **领域工程部门**: 负责核心资源库的开发和维护，适用于大型组织。
  - **层次领域工程部门**：可以设立多层(通常两层)领域工程部门，不同部门服务范围不同。这种模型趋向臃肿。

## 10.5产品线演化过程

- **第一阶段——开发阶段**
- **第二阶段——配置分发阶段**
- **第三阶段——演化阶段**

## 10.6 产品线体系结构的演化
- **需求和演化分类**:
  - **核心资源的演化**: 对共享资源的持续更新和改进。
  - **产品的演化**: 根据市场需求调整和新增产品功能。
  - **版本升级**: 定期更新产品线的各个版本。
- **演化管理**: 确保产品线演化与市场和技术发展同步，同时维护产品之间的兼容性。

## 本章作业与思考题
1. 讨论软件产品线方法如何帮助企业降低成本并提高软件质量。
2. 分析软件产品线在不同组织结构中的实施策略。
3. 探讨软件产品线体系结构的演化过程及其对业务的影响。

